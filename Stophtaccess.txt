# ğŸŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Apache Ù„Ù…Ø´Ø±ÙˆØ¹ Ù‡Ø§ÙƒØ§Ø«ÙˆÙ† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©

RewriteEngine On

# Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ HTTP Ø¥Ù„Ù‰ HTTPS (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# ØªÙˆØ¬ÙŠÙ‡ Ø·Ù„Ø¨Ø§Øª API Ø¥Ù„Ù‰ Laravel
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.*)$ backend/public/api/$1 [L,QSA]

# ØªÙˆØ¬ÙŠÙ‡ Ø·Ù„Ø¨Ø§Øª storage Ø¥Ù„Ù‰ Laravel
RewriteCond %{REQUEST_URI} ^/storage/
RewriteRule ^storage/(.*)$ backend/public/storage/$1 [L]

# ØªÙˆØ¬ÙŠÙ‡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¥Ù„Ù‰ Vue.js
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_URI} !^/storage/
RewriteRule ^.*$ index.html [L]

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
<Files ".env">
    Order allow,deny
    Deny from all
</Files>

<Files "composer.json">
    Order allow,deny
    Deny from all
</Files>

<Files "composer.lock">
    Order allow,deny
    Deny from all
</Files>

# Ø¶ØºØ· Ø§Ù„Ù…Ù„ÙØ§Øª Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cache Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"  
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
</IfModule> 