import{d as P,u as N,b as G,g as K,q as Y,s as z,r as C,c as a,a as e,t as i,v as J,l as p,j as u,x as v,y as k,p as h,z as I,F as q,h as j,m as V,A as Q,B as W,o as n,_ as X}from"./index-4GZd612C.js";import{a as Z}from"./api-D0AU6Wcj.js";const ee=[{value:"SmartMonitoring",label:"Smart Monitoring of Services and Facilities",label_ar:"المتابعة الذكية للخدمات والمرافق"},{value:"InteractiveTourism",label:"Interactive Religious Tourism",label_ar:"السياحة الدينية التفاعلية"},{value:"SmartMobility",label:"Smart Mobility and Sustainable Transport",label_ar:"النقل الذكي والتنقل المستدام"},{value:"DigitalHealthcare",label:"Digital Healthcare",label_ar:"الرعاية الصحية الرقمية"},{value:"EnvironmentalTech",label:"Environmental Technology",label_ar:"التقنية البيئية"},{value:"SmartInfrastructure",label:"Smart Infrastructure",label_ar:"البنى التحتية الذكية"}],te=[{value:"Individual",label:"Individual",label_ar:"فردي"},{value:"Team",label:"Team",label_ar:"فريق"},{value:"Organization",label:"Organization",label_ar:"منظمة"}],se={class:"min-h-screen bg-gradient-to-br from-secondary-100 to-white py-12 px-4"},oe={class:"container-custom max-w-3xl mx-auto"},re={class:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden"},ie={class:"bg-gradient-to-r from-primary-600 to-accent-500 px-8 py-6 text-center text-white"},le={class:"text-3xl font-bold mb-2"},ae={class:"text-white-100 opacity-90"},ne={class:"px-8 py-8"},de={class:"form-section"},me={class:"section-title"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={class:"form-group"},ce={class:"form-label",for:"full_name"},fe=["placeholder"],ve={key:0,class:"form-error"},_e={class:"form-group"},ge={class:"form-label",for:"email"},he=["placeholder"],be={key:0,class:"form-error"},ye={class:"form-group"},ke={class:"form-label",for:"phone"},we=["placeholder"],$e={key:0,class:"form-error"},xe={class:"form-group"},Me={class:"form-label",for:"age"},Te=["placeholder"],qe={key:0,class:"form-error"},je={class:"form-group md:col-span-2"},Se={class:"form-label",for:"city"},ze=["placeholder"],Ce={key:0,class:"form-error"},Ie={class:"form-section"},Ve={class:"section-title"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Oe={class:"form-group"},Ee={class:"form-label",for:"field_of_interest"},Fe={value:"",disabled:""},Ue=["value"],Ae={key:0,class:"form-error"},De={class:"form-group"},Re={class:"form-label",for:"registration_type"},He={value:"",disabled:""},Le=["value"],Pe={key:0,class:"form-error"},Ne={key:0,class:"form-section team-section"},Ge={class:"team-header"},Ke={class:"flex items-center gap-3 mb-4"},Ye={class:"text-xl font-bold text-primary-700"},Je={class:"text-sm text-gray-600"},Qe={class:"team-members-list"},We={class:"member-number"},Xe=["onUpdate:modelValue","placeholder"],Ze=["onClick","disabled","title"],et={class:"team-controls"},tt=["disabled"],st={class:"member-counter"},ot={key:0,class:"quick-add-section"},rt={class:"quick-add-buttons"},it={class:"form-section"},lt={class:"section-title"},at={class:"space-y-6"},nt={class:"form-group"},dt={class:"form-label",for:"cv"},mt={class:"file-upload-wrapper"},ut={key:0,class:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pt={key:1,class:"w-6 h-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ct={class:"text-center"},ft={key:0,class:"text-sm text-gray-600"},vt={key:1},_t={class:"text-sm text-green-700 font-semibold"},gt={class:"text-xs text-gray-500 mt-1"},ht={key:0,class:"form-error"},bt={class:"form-group"},yt={class:"form-label",for:"project_idea"},kt=["placeholder"],wt={key:0,class:"form-error"},$t={class:"form-section"},xt={class:"terms-checkbox"},Mt={for:"terms",class:"checkbox-label"},Tt=["disabled"],qt={key:0,class:"loading-spinner"},jt=P({__name:"Register",setup(St){const B=W(),{t:_}=N(),O=G(),S=K(()=>O.isRTL),w=Y(),E=ee,F=te,s=z({full_name:"",email:"",phone:"",age:18,city:"",field_of_interest:"",registration_type:"",cv:null,project_idea:"",terms_accepted:!1}),l=z({}),$=C(!1),d=C([""]);function x(){return s.registration_type==="Team"?10:15}function U(){d.value.length<x()&&d.value.push("")}function A(r){d.value.length>1&&d.value.splice(r,1)}function M(r){const t=x(),o=Math.min(r,t);if(o>d.value.length){const m=o-d.value.length;for(let g=0;g<m;g++)d.value.push("")}else o<d.value.length&&(d.value=d.value.slice(0,o))}function D(r){const t=r.target;if(t.files&&t.files.length>0){const o=t.files[0],m=24*1024*1024;if(o.size>m){w.showAlert("error","حجم الملف كبير جداً. الحد الأقصى المسموح 24 ميجا"),t.value="",s.cv=null;return}if(!["application/pdf","image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(o.type)){w.showAlert("error","نوع الملف غير مدعوم. يُسمح فقط بملفات PDF والصور"),t.value="",s.cv=null;return}s.cv=o}else s.cv=null;f("cv")}function R(r){if(r===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(r)/Math.log(t));return parseFloat((r/Math.pow(t,m)).toFixed(2))+" "+o[m]}function f(r){l[r]&&(l[r]=[])}async function H(){var t,o,m,g;Object.keys(l).forEach(c=>{l[c]=[]});const r={};if(s.full_name.trim()||(r.full_name=[_("form.required")]),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(r.email=["البريد الإلكتروني غير صحيح"]):r.email=[_("form.required")],s.phone.trim()||(r.phone=[_("form.required")]),(!s.age||s.age<16||s.age>100)&&(r.age=["العمر يجب أن يكون بين 16 و 100 سنة"]),s.city.trim()||(r.city=[_("form.required")]),s.field_of_interest||(r.field_of_interest=[_("form.required")]),s.registration_type||(r.registration_type=[_("form.required")]),s.cv?(s.cv.size>25165824&&(r.cv=["حجم الملف كبير جداً. الحد الأقصى المسموح 24 ميجا"]),["application/pdf","image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.cv.type)||(r.cv=["نوع الملف غير مدعوم. يُسمح فقط بملفات PDF والصور"])):r.cv=[_("form.required")],s.terms_accepted||(r.terms_accepted=["يجب الموافقة على الشروط والأحكام"]),Object.assign(l,r),Object.keys(r).length>0){w.showAlert("error","يرجى تصحيح الأخطاء المعروضة");return}$.value=!0;try{const c=new FormData;Object.entries(s).forEach(([T,y])=>{T==="cv"&&y?c.append("cv",y):c.append(T,y)}),(s.registration_type==="Team"||s.registration_type==="Organization")&&d.value.filter(y=>y.trim()!=="").forEach((y,L)=>{c.append(`team_members[${L}]`,y.trim())});const b=await Z.registerParticipant(c);b.success?(w.showAlert("success",_("form.success")),B.push("/thank-you")):(w.showAlert("error",b.message||_("form.error")),b.error&&(l.general=[b.error]))}catch(c){Object.keys(l).forEach(b=>{l[b]=[]}),(o=(t=c.response)==null?void 0:t.data)!=null&&o.errors&&Object.assign(l,c.response.data.errors),w.showAlert("error",((g=(m=c.response)==null?void 0:m.data)==null?void 0:g.message)||"حدث خطأ أثناء التسجيل")}finally{$.value=!1}}return(r,t)=>(n(),a("div",se,[e("div",oe,[e("div",re,[e("div",ie,[e("h1",le,i(r.$t("app.register")),1),e("p",ae,i(r.$t("form.register_subtitle")),1)]),e("div",ne,[e("form",{onSubmit:J(H,["prevent"]),enctype:"multipart/form-data",novalidate:"",class:"space-y-6"},[e("div",de,[e("h2",me,[t[21]||(t[21]=e("svg",{class:"w-5 h-5 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),u(" "+i(r.$t("form.personal_info")),1)]),e("div",ue,[e("div",pe,[e("label",ce,[t[22]||(t[22]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.full_name")),1)]),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.full_name=o),id:"full_name",type:"text",class:h(["form-input",{"form-input-error":l.full_name}]),placeholder:r.$t("form.full_name"),onInput:t[1]||(t[1]=o=>f("full_name")),required:""},null,42,fe),[[k,s.full_name]]),l.full_name?(n(),a("p",ve,i(l.full_name[0]),1)):p("",!0)]),e("div",_e,[e("label",ge,[t[23]||(t[23]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.email")),1)]),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.email=o),id:"email",type:"email",class:h(["form-input",{"form-input-error":l.email}]),placeholder:r.$t("form.email"),onInput:t[3]||(t[3]=o=>f("email")),required:""},null,42,he),[[k,s.email]]),l.email?(n(),a("p",be,i(l.email[0]),1)):p("",!0)]),e("div",ye,[e("label",ke,[t[24]||(t[24]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.phone")),1)]),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.phone=o),id:"phone",type:"tel",class:h(["form-input",{"form-input-error":l.phone}]),placeholder:r.$t("form.phone"),onInput:t[5]||(t[5]=o=>f("phone")),required:""},null,42,we),[[k,s.phone]]),l.phone?(n(),a("p",$e,i(l.phone[0]),1)):p("",!0)]),e("div",xe,[e("label",Me,[t[25]||(t[25]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.age")),1)]),v(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.age=o),id:"age",type:"number",min:"16",max:"100",class:h(["form-input",{"form-input-error":l.age}]),placeholder:r.$t("form.age"),onInput:t[7]||(t[7]=o=>f("age")),required:""},null,42,Te),[[k,s.age,void 0,{number:!0}]]),l.age?(n(),a("p",qe,i(l.age[0]),1)):p("",!0)]),e("div",je,[e("label",Se,[t[26]||(t[26]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.city")),1)]),v(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.city=o),id:"city",type:"text",class:h(["form-input",{"form-input-error":l.city}]),placeholder:r.$t("form.city"),onInput:t[9]||(t[9]=o=>f("city")),required:""},null,42,ze),[[k,s.city]]),l.city?(n(),a("p",Ce,i(l.city[0]),1)):p("",!0)])])]),e("div",Ie,[e("h2",Ve,[t[27]||(t[27]=e("svg",{class:"w-5 h-5 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),u(" "+i(r.$t("form.registration_details")),1)]),e("div",Be,[e("div",Oe,[e("label",Ee,[t[28]||(t[28]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.field_of_interest")),1)]),v(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.field_of_interest=o),id:"field_of_interest",class:h(["form-select",{"form-input-error":l.field_of_interest}]),onChange:t[11]||(t[11]=o=>f("field_of_interest")),required:""},[e("option",Fe,i(r.$t("form.field_of_interest")),1),(n(!0),a(q,null,j(V(E),o=>(n(),a("option",{key:o.value,value:o.value},i(S.value?o.label_ar:o.label),9,Ue))),128))],34),[[I,s.field_of_interest]]),l.field_of_interest?(n(),a("p",Ae,i(l.field_of_interest[0]),1)):p("",!0)]),e("div",De,[e("label",Re,[t[29]||(t[29]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.registration_type")),1)]),v(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.registration_type=o),id:"registration_type",class:h(["form-select",{"form-input-error":l.registration_type}]),onChange:t[13]||(t[13]=o=>f("registration_type")),required:""},[e("option",He,i(r.$t("form.registration_type")),1),(n(!0),a(q,null,j(V(F),o=>(n(),a("option",{key:o.value,value:o.value},i(S.value?o.label_ar:o.label),9,Le))),128))],34),[[I,s.registration_type]]),l.registration_type?(n(),a("p",Pe,i(l.registration_type[0]),1)):p("",!0)])])]),s.registration_type==="Team"||s.registration_type==="Organization"?(n(),a("div",Ne,[e("div",Ge,[e("div",Ke,[t[30]||(t[30]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",null,[e("h3",Ye,i(s.registration_type==="Team"?"أعضاء الفريق":"أعضاء المنظمة"),1),e("p",Je,i(s.registration_type==="Team"?"أضف أسماء أعضاء الفريق الإضافيين (اختياري - يمكنك إضافة حتى 10 أعضاء)":"أضف أسماء أعضاء المنظمة الإضافيين (اختياري - يمكنك إضافة حتى 15 عضو)"),1)])])]),e("div",Qe,[(n(!0),a(q,null,j(d.value,(o,m)=>(n(),a("div",{key:m,class:"team-member-item"},[e("div",We,i(m+1),1),v(e("input",{"onUpdate:modelValue":g=>d.value[m]=g,type:"text",placeholder:`اسم ${s.registration_type==="Team"?"عضو الفريق":"عضو المنظمة"} ${m+1}`,class:"form-input flex-1",maxlength:"100"},null,8,Xe),[[k,d.value[m]]]),e("button",{onClick:g=>A(m),type:"button",class:"remove-member-btn",disabled:d.value.length===1,title:d.value.length===1?"يجب أن يكون هناك عضو واحد على الأقل":"حذف العضو"},t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Ze)]))),128))]),e("div",et,[e("button",{onClick:U,type:"button",class:"add-member-btn",disabled:d.value.length>=x()},[t[32]||(t[32]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),u(" إضافة "+i(s.registration_type==="Team"?"عضو فريق":"عضو منظمة")+" جديد ",1)],8,tt),e("span",st,i(d.value.length)+" / "+i(x())+" "+i((s.registration_type==="Team","أعضاء")),1)]),d.value.length===1?(n(),a("div",ot,[t[33]||(t[33]=e("p",{class:"quick-add-label"},"إضافة سريعة:",-1)),e("div",rt,[e("button",{onClick:t[14]||(t[14]=o=>M(3)),type:"button",class:"quick-add-btn"},i(s.registration_type==="Team"?"فريق من 3":"منظمة من 3"),1),e("button",{onClick:t[15]||(t[15]=o=>M(5)),type:"button",class:"quick-add-btn"},i(s.registration_type==="Team"?"فريق من 5":"منظمة من 5"),1),e("button",{onClick:t[16]||(t[16]=o=>M(7)),type:"button",class:"quick-add-btn"},i(s.registration_type==="Team"?"فريق من 7":"منظمة من 7"),1)])])):p("",!0)])):p("",!0),e("div",it,[e("h2",lt,[t[34]||(t[34]=e("svg",{class:"w-5 h-5 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),u(" "+i(r.$t("form.additional_info")),1)]),e("div",at,[e("div",nt,[e("label",dt,[t[35]||(t[35]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.cv")),1)]),e("div",mt,[e("input",{onChange:D,id:"cv",type:"file",accept:"application/pdf,image/*",class:h(["file-input",{"form-input-error":l.cv}]),required:""},null,34),e("div",{class:h(["file-upload-label",{"file-selected":s.cv}])},[s.cv?(n(),a("svg",pt,t[37]||(t[37]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(n(),a("svg",ut,t[36]||(t[36]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},null,-1)]))),e("div",ct,[s.cv?(n(),a("div",vt,[e("span",_t,i(s.cv.name),1),e("p",gt,i(R(s.cv.size)),1)])):(n(),a("span",ft,"اختر ملف السيرة الذاتية (PDF أو صورة - أقصى حجم 24 ميجا)"))])],2)]),l.cv?(n(),a("p",ht,i(l.cv[0]),1)):p("",!0)]),e("div",bt,[e("label",yt,i(r.$t("form.project_idea")),1),v(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.project_idea=o),id:"project_idea",class:"form-textarea",placeholder:r.$t("form.project_idea"),onInput:t[18]||(t[18]=o=>f("project_idea")),rows:"4"},null,40,kt),[[k,s.project_idea]]),l.project_idea?(n(),a("p",wt,i(l.project_idea[0]),1)):p("",!0)])])]),e("div",$t,[e("div",xt,[v(e("input",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.terms_accepted=o),id:"terms",type:"checkbox",class:"checkbox-input",onChange:t[20]||(t[20]=o=>f("terms_accepted")),required:""},null,544),[[Q,s.terms_accepted]]),e("label",Mt,[t[38]||(t[38]=e("span",{class:"required-asterisk"},"*",-1)),u(" "+i(r.$t("form.terms")),1)])]),e("button",{type:"submit",class:"submit-btn",disabled:$.value},[$.value?(n(),a("span",qt,t[39]||(t[39]=[e("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):p("",!0),u(" "+i($.value?"جاري الإرسال...":r.$t("form.submit")),1)],8,Tt)])],32)])])])]))}}),It=X(jt,[["__scopeId","data-v-4945370a"]]);export{It as default};
