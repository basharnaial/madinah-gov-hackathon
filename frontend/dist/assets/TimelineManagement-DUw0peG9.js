import{d as H,b as E,r as d,g as G,e as I,c as n,a as e,l as v,i as D,w as T,j as C,p as M,k as J,t as s,F as K,h as O,v as P,x as l,y as u,A as Q,o as r,m as b}from"./index-4GZd612C.js";import{a as x}from"./api-D0AU6Wcj.js";import{a as U,b as R,c as W}from"./dateUtils-jhCLZb2J.js";const X={class:"min-h-screen bg-gray-50"},Y={class:"bg-white shadow-sm border-b border-gray-200"},Z={class:"container mx-auto px-4 py-4"},ee={class:"flex justify-between items-center"},te={class:"flex items-center gap-6"},se={class:"flex items-center gap-4"},ae={class:"flex items-center gap-4"},oe={class:"container mx-auto px-4 py-8"},ie={class:"mb-8 flex justify-between items-center"},ne={class:"text-3xl font-bold text-gray-900"},re={class:"text-gray-600 mt-2"},de={key:0,class:"text-center py-12"},le={class:"inline-flex items-center space-x-2"},ue={class:"text-gray-600"},me={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},ce={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},_e={class:"bg-gray-50"},ye={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},fe={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},ge={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},ve={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},be={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},xe={class:"bg-white divide-y divide-gray-200"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},we={class:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-primary-100 text-primary-800 font-medium"},ke={class:"px-6 py-4"},$e={class:"text-sm font-medium text-gray-900"},Ce={class:"text-sm text-gray-500 mt-1"},Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Se={key:0,class:"flex flex-col"},je={class:"font-medium"},Ve={key:0,class:"font-medium text-accent-600"},De={class:"text-xs text-gray-500"},Te={key:1,class:"text-xs text-accent-500"},Ue={key:1,class:"text-gray-400"},Be={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},Le=["onClick"],Ae=["onClick"],Ne={key:2,class:"text-center py-12"},qe={class:"text-gray-500"},ze={class:"text-lg font-medium"},He={class:"text-sm mt-2"},Ee={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Ge={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ie={class:"sticky top-0 bg-white border-b px-6 py-4"},Je={class:"flex justify-between items-center"},Ke={class:"text-lg font-medium text-gray-900"},Oe={class:"block text-sm font-medium text-gray-700 mb-2"},Pe={class:"block text-sm font-medium text-gray-700 mb-2"},Qe={class:"block text-sm font-medium text-gray-700 mb-2"},Re={class:"block text-sm font-medium text-gray-700 mb-2"},We={class:"block text-sm font-medium text-gray-700 mb-2"},Xe={class:"block text-sm font-medium text-gray-700 mb-2"},Ye={class:"block text-sm font-medium text-gray-700 mb-2"},Ze={class:"text-xs text-gray-500 mt-1"},et={class:"flex items-center"},tt={for:"is_active",class:"ml-2 block text-sm text-gray-900"},st={class:"flex justify-end space-x-3 pt-6 border-t"},at=["disabled"],ot={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},it={class:"bg-white rounded-lg max-w-md w-full p-6"},nt={class:"text-lg font-medium text-gray-900 mb-4"},rt={class:"text-gray-600 mb-6"},dt={class:"flex justify-end space-x-3"},lt=["disabled"],_t=H({__name:"TimelineManagement",setup(ut){const h=E(),c=d([]),w=d(!0),p=d(!1),_=d(!1),y=d(!1),f=d(!1),m=d(null),g=d(null),i=d({order:1,title_ar:"",title_en:"",subtitle_ar:"",subtitle_en:"",description_ar:"",description_en:"",step_date:"",due_date:"",is_active:!0}),B=G(()=>[...c.value].sort((t,a)=>t.order-a.order));function S(t){return h.currentLanguage==="ar"?R(t):W(t)}async function k(){try{w.value=!0;const t=await x.getAdminTimelineSteps();t.success&&t.data&&(c.value=t.data)}catch(t){console.error("Failed to fetch timeline steps:",t)}finally{w.value=!1}}function F(){m.value=null,j(),p.value=!0}function L(t){m.value=t,i.value={order:t.order,title_ar:t.title_ar,title_en:t.title_en,subtitle_ar:t.subtitle_ar||"",subtitle_en:t.subtitle_en||"",description_ar:t.description_ar||"",description_en:t.description_en||"",step_date:t.step_date||"",due_date:t.due_date||"",is_active:t.is_active},p.value=!0}function $(){p.value=!1,m.value=null,j()}function j(){i.value={order:c.value.length+1,title_ar:"",title_en:"",subtitle_ar:"",subtitle_en:"",description_ar:"",description_en:"",step_date:"",due_date:"",is_active:!0}}async function A(){try{y.value=!0;const t={...i.value,step_date:i.value.step_date||null,due_date:i.value.due_date||null};m.value?await x.updateTimelineStep(m.value.id,t):await x.createTimelineStep(t),await k(),$()}catch(t){console.error("Failed to save timeline step:",t)}finally{y.value=!1}}function N(t){g.value=t,_.value=!0}async function q(){if(g.value)try{f.value=!0,await x.deleteTimelineStep(g.value.id),await k(),_.value=!1,g.value=null}catch(t){console.error("Failed to delete timeline step:",t)}finally{f.value=!1}}return I(()=>{k()}),(t,a)=>{const V=J("router-link");return r(),n("div",X,[e("header",Y,[e("div",Z,[e("div",ee,[e("div",te,[a[12]||(a[12]=e("h1",{class:"text-2xl font-bold text-primary-500"},"لوحة تحكم الادارة",-1)),e("nav",se,[D(V,{to:"/admin/dashboard",class:M(["text-sm font-medium transition-colors hover:text-primary-600",t.$route.name==="AdminDashboard"?"text-primary-600":"text-gray-600"])},{default:T(()=>a[10]||(a[10]=[C(" المشاركين ")])),_:1,__:[10]},8,["class"]),D(V,{to:"/admin/timeline",class:M(["text-sm font-medium transition-colors hover:text-primary-600",t.$route.name==="TimelineManagement"?"text-primary-600":"text-gray-600"])},{default:T(()=>a[11]||(a[11]=[C(" إدارة الجدول الزمني ")])),_:1,__:[11]},8,["class"])])]),e("div",ae,[e("button",{onClick:a[0]||(a[0]=o=>t.$router.push("/admin/dashboard")),class:"text-gray-600 hover:text-primary-600 text-sm"}," العودة للوحة التحكم ")])])])]),e("div",oe,[e("div",ie,[e("div",null,[e("h1",ne,s(t.$t("admin.timeline_management")),1),e("p",re,s(t.$t("admin.timeline_management_desc")),1)]),e("button",{onClick:F,class:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2"},[a[13]||(a[13]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),C(" "+s(t.$t("admin.add_step")),1)])]),w.value?(r(),n("div",de,[e("div",le,[a[14]||(a[14]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)),e("span",ue,s(t.$t("admin.loading")),1)])])):c.value.length>0?(r(),n("div",me,[e("div",ce,[e("table",pe,[e("thead",_e,[e("tr",null,[e("th",ye,s(t.$t("admin.order")),1),e("th",fe,s(t.$t("admin.title")),1),e("th",ge,s(t.$t("admin.date")),1),e("th",ve,s(t.$t("admin.status")),1),e("th",be,s(t.$t("admin.actions")),1)])]),e("tbody",xe,[(r(!0),n(K,null,O(B.value,o=>(r(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",he,[e("span",we,s(o.order),1)]),e("td",ke,[e("div",$e,s(b(h).currentLanguage==="ar"?o.title_ar:o.title_en),1),e("div",Ce,s(b(h).currentLanguage==="ar"?o.subtitle_ar:o.subtitle_en),1)]),e("td",Me,[o.step_date?(r(),n("div",Se,[e("span",je,s(S(o.step_date)),1),o.due_date?(r(),n("span",Ve,"- "+s(S(o.due_date)),1)):v("",!0),e("span",De,s(b(U)(o.step_date))+" هـ",1),o.due_date?(r(),n("span",Te,"- "+s(b(U)(o.due_date))+" هـ",1)):v("",!0)])):(r(),n("span",Ue,s(t.$t("admin.no_date")),1))]),e("td",Be,[e("span",{class:M(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},s(o.is_active?t.$t("admin.active"):t.$t("admin.inactive")),3)]),e("td",Fe,[e("button",{onClick:z=>L(o),class:"text-indigo-600 hover:text-indigo-900 transition-colors"},s(t.$t("admin.edit")),9,Le),e("button",{onClick:z=>N(o),class:"text-red-600 hover:text-red-900 transition-colors"},s(t.$t("admin.delete")),9,Ae)])]))),128))])])])])):(r(),n("div",Ne,[e("div",qe,[a[15]||(a[15]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("p",ze,s(t.$t("admin.no_steps")),1),e("p",He,s(t.$t("admin.no_steps_desc")),1)])]))]),p.value?(r(),n("div",Ee,[e("div",Ge,[e("div",Ie,[e("div",Je,[e("h3",Ke,s(m.value?t.$t("admin.edit_step"):t.$t("admin.create_step")),1),e("button",{onClick:$,class:"text-gray-400 hover:text-gray-600"},a[16]||(a[16]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("form",{onSubmit:P(A,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[e("label",Oe,s(t.$t("admin.order")),1),l(e("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>i.value.order=o),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,i.value.order,void 0,{number:!0}]])]),e("div",null,[e("label",Pe,s(t.$t("admin.title_ar")),1),l(e("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>i.value.title_ar=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",dir:"rtl"},null,512),[[u,i.value.title_ar]])]),e("div",null,[e("label",Qe,s(t.$t("admin.title_en")),1),l(e("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>i.value.title_en=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,i.value.title_en]])]),e("div",null,[e("label",Re,s(t.$t("admin.subtitle_ar")),1),l(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=o=>i.value.subtitle_ar=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",dir:"rtl"},null,512),[[u,i.value.subtitle_ar]])]),e("div",null,[e("label",We,s(t.$t("admin.subtitle_en")),1),l(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=o=>i.value.subtitle_en=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,i.value.subtitle_en]])]),e("div",null,[e("label",Xe,s(t.$t("admin.date")),1),l(e("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>i.value.step_date=o),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,i.value.step_date]])]),e("div",null,[e("label",Ye,s(t.$t("admin.due_date")),1),l(e("input",{"onUpdate:modelValue":a[7]||(a[7]=o=>i.value.due_date=o),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,512),[[u,i.value.due_date]]),e("p",Ze,s(t.$t("admin.due_date_optional")),1)]),e("div",et,[l(e("input",{"onUpdate:modelValue":a[8]||(a[8]=o=>i.value.is_active=o),id:"is_active",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[Q,i.value.is_active]]),e("label",tt,s(t.$t("admin.is_active")),1)]),e("div",st,[e("button",{type:"button",onClick:$,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},s(t.$t("admin.cancel")),1),e("button",{type:"submit",disabled:y.value,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},s(y.value?t.$t("admin.saving"):t.$t("admin.save")),9,at)])],32)])])):v("",!0),_.value?(r(),n("div",ot,[e("div",it,[e("h3",nt,s(t.$t("admin.confirm_delete")),1),e("p",rt,s(t.$t("admin.confirm_delete_step")),1),e("div",dt,[e("button",{onClick:a[9]||(a[9]=o=>_.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50"},s(t.$t("admin.cancel")),1),e("button",{onClick:q,disabled:f.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 disabled:opacity-50"},s(f.value?t.$t("admin.deleting"):t.$t("admin.delete")),9,lt)])])])):v("",!0)])}}});export{_t as default};
